---
import Layout from "../layouts/Layout.astro";
import ItemCard from "../components/ItemCard.astro";
---

<Layout title="HV Generator">
    <main>
        <ItemCard
            links={[]}, imageSrc="/hv-generator-schematic.png">
            <p>This circuit generates 30 KV at the spark gap on the right from a 3 V input at 0.6 A.</p>
            <p>T1 is operated in flyback to charge C3 to 430 V, then discharges across T2 for the final 30 kV arc.</p>
            <p>The left side of T1 forms an oscillator. Upon power-up, current flows through R1 to Q1 gate, turning on MOSFET Q1 and current flows through T1 primary from pin 3 to 4. The rising magnetic field in the T1 primary induces a reverse voltage across the T1 auxiliary coil on pin 1, 2 - discharging Q1 gate to halt the flow of current through T1 primary. The collapsing magnetic field indices a high voltage across T1 secondary, charging C3 through D2.</p>
            <p>Once C3 reaches 400 V, the zeners D3, D4 conduct, charging C4. Once C3 charges to 430 V meaning C4 charged to 30 V, DIAC D10 conducts to trigger the larger SCR D11 to discharge C3 across T2. The DIAC is necessary as T1 operated in flyback does not have sufficient current to trigger SCR D11 on its own.</p>
            <p>D1 protects MOSFET Q1 from high voltage pulses, D6-D9 clamps the maximum voltage on C3 and C4 to 440 V and 40 V respectively, R2 limits the current to SCR D11 when C4 discharges.</p>
        </ItemCard>
    </main>
</Layout>
